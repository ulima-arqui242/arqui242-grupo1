# 9.3. Iteración 2: Identificar estructuras para soportar la funcionalidad primaria

## Propósito de la Iteración
El objetivo de esta iteración es identificar las estructuras técnicas y componentes clave necesarios para soportar las funcionalidades primarias de la plataforma **MedSysPro**. Esta identificación permitirá definir cómo los módulos interactúan entre sí y con la infraestructura tecnológica, asegurando que las funcionalidades descritas en la iteración anterior se implementen de manera efectiva.

---

## Funcionalidades Primarias

A continuación, se describen las funcionalidades que guiarán la identificación de las estructuras necesarias:

1. **Gestión de Usuarios:**
   - Registro y autenticación de usuarios.
   - Configuración de roles y permisos.
   - Recuperación de contraseña.

2. **Gestión de Citas:**
   - Agendar, cancelar y modificar citas.
   - Configuración de horarios por parte de los médicos.
   - Notificaciones de recordatorios para pacientes.

3. **Historial Médico:**
   - Visualización y actualización del historial médico de los pacientes.
   - Acceso al historial por parte de los médicos.

4. **Teleconsulta:**
   - Agendar y realizar consultas virtuales.
   - Acceso a transcripciones de las consultas.

5. **Chatbot de Diagnóstico:**
   - Recopilación de datos clínicos.
   - Generación de diagnósticos y sugerencias de tratamientos.

6. **Chat y Comunicación:**
   - Mensajes directos entre pacientes y médicos.
   - Envío de archivos adjuntos y notificaciones.

7. **Gestión de Recetas y Medicamentos:**
   - Generación, visualización y descarga de recetas.

8. **Gestión de Resultados:**
   - Visualización y descarga de resultados de laboratorio.

---

## Estructuras Identificadas

### 1. **Frontend**
El cliente web será desarrollado en **ReactJS**, proporcionando una interfaz de usuario interactiva para pacientes y médicos.

- **Propósito:** Interacción directa con el sistema por parte de los usuarios.
- **Componentes Principales:**
  - Formularios de registro y autenticación.
  - Panel de gestión de citas y horarios.
  - Módulo de historial médico y recetas.

---

### 2. **API Gateway**
Utilizando **NestJS**, el gateway centraliza las solicitudes de los usuarios hacia los microservicios correspondientes.

- **Propósito:** Gestionar la comunicación entre el cliente y los microservicios de manera segura y eficiente.
- **Responsabilidades:**
  - Validación de autenticación y autorización.
  - Redirección de solicitudes hacia los microservicios correctos.
  - Aplicación de políticas de seguridad.

---

### 3. **Mensajería Asíncrona**
Se utilizará **RabbitMQ** como sistema de mensajería para facilitar la comunicación entre microservicios.

- **Propósito:** Garantizar que los servicios puedan comunicarse de manera desacoplada y escalable.
- **Responsabilidades:**
  - Procesar eventos como la creación de citas, actualización de historiales médicos o envío de notificaciones.

---

### 4. **Microservicios (Backend)**
Cada funcionalidad principal será soportada por un conjunto de microservicios, desarrollados en **NestJS**. A continuación, se describen los más relevantes:

#### a) Microservicio de Autenticación
- **Propósito:** Gestión de usuarios, roles y autenticación.
- **Funcionalidades:** Login, registro, recuperación de contraseñas y asignación de permisos.

#### b) Microservicio de Citas
- **Propósito:** Gestión de agendamiento y visualización de citas.
- **Funcionalidades:** Creación, cancelación, modificación de citas, y notificaciones.

#### c) Microservicio de Historial Médico
- **Propósito:** Almacenamiento y actualización de historiales médicos.
- **Funcionalidades:** Visualización y modificación de datos clínicos.

#### d) Microservicio de Chatbot de Diagnóstico
- **Propósito:** Análisis automático de datos clínicos.
- **Funcionalidades:** Generación de diagnósticos y recomendaciones.

#### e) Microservicio de Comunicación
- **Propósito:** Facilitar la interacción entre pacientes y médicos.
- **Funcionalidades:** Chat en tiempo real, envío de archivos adjuntos y notificaciones.

#### f) Microservicio de Resultados
- **Propósito:** Gestión de resultados de laboratorio e imágenes médicas.
- **Funcionalidades:** Visualización y descarga de resultados.

---

### 5. **Bases de Datos**
Se utilizarán bases de datos **PostgreSQL** para cada microservicio, excepto los microservicios de chat y chatbot los cuales usarán **MongoDb**, asegurando escalabilidad y seguridad.

- **Propósito:** Almacenamiento persistente de datos de usuarios, citas, historiales médicos, entre otros.
- **Diseño:** Cada microservicio contará con su propia base de datos, manteniendo el principio de separación de responsabilidades.

---

### 6. **Infraestructura**
La plataforma será desplegada en un entorno **Docker** para asegurar portabilidad y consistencia en los entornos de desarrollo, prueba y producción.

- **Orquestación:** Uso de **Kubernetes** para manejar el escalado automático de microservicios.
- **Entorno:** Despliegue en **AWS** o una nube equivalente para garantizar disponibilidad y escalabilidad.

---
